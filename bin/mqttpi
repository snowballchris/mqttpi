#!/bin/sh
SCRIPT_DIR="$(CDPATH= cd -- "$(dirname -- "$0")" && pwd)"
PROJECT_ROOT="$(dirname "$SCRIPT_DIR")"
VENV="$PROJECT_ROOT/.venv"

if [ ! -d "$VENV" ]; then
  python3 -m venv "$VENV"
fi
. "$VENV/bin/activate"
pip -q install -r "$PROJECT_ROOT/requirements.txt"
exec python3 -m mqttpi.main "$@"

